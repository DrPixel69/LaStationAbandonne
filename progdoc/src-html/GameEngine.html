<!DOCTYPE HTML>
<html lang="fr">
<head>
<!-- Generated by javadoc -->
<title>Source code</title>
<meta name="description" content="source: class: GameEngine">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body class="source">
<main role="main">
<div class="sourceContainer">
<pre><span class="sourceLineNo">001</span><a id="line.1">import java.util.Stack;</a>
<span class="sourceLineNo">002</span><a id="line.2">import java.util.Map;</a>
<span class="sourceLineNo">003</span><a id="line.3">import java.util.HashMap;</a>
<span class="sourceLineNo">004</span><a id="line.4">import java.util.Scanner;</a>
<span class="sourceLineNo">005</span><a id="line.5">import java.io.File;</a>
<span class="sourceLineNo">006</span><a id="line.6">/**</a>
<span class="sourceLineNo">007</span><a id="line.7"> * Cette classe est une partie du jeu "Le mÃ©tro abandonnÃ©". </a>
<span class="sourceLineNo">008</span><a id="line.8"> * "Le mÃ©tro abandonnÃ©" est plutot simple, c'est un jeu basÃ© sur des commandes.   </a>
<span class="sourceLineNo">009</span><a id="line.9"> * </a>
<span class="sourceLineNo">010</span><a id="line.10"> * Cette classe crÃ©er les salles et exÃ©cute les commandes.</a>
<span class="sourceLineNo">011</span><a id="line.11"> * </a>
<span class="sourceLineNo">012</span><a id="line.12"> * @author Maxime BOUET</a>
<span class="sourceLineNo">013</span><a id="line.13"> * @version 28.02.2020</a>
<span class="sourceLineNo">014</span><a id="line.14"> */</a>
<span class="sourceLineNo">015</span><a id="line.15">public class GameEngine</a>
<span class="sourceLineNo">016</span><a id="line.16">{</a>
<span class="sourceLineNo">017</span><a id="line.17">    private Parser aParser;</a>
<span class="sourceLineNo">018</span><a id="line.18">    private Player aPlayer;</a>
<span class="sourceLineNo">019</span><a id="line.19">    private HashMap&lt;String, Room&gt; aRooms;</a>
<span class="sourceLineNo">020</span><a id="line.20">    private UserInterface aGui;</a>
<span class="sourceLineNo">021</span><a id="line.21">    private int aCompteur;</a>
<span class="sourceLineNo">022</span><a id="line.22">    private RoomRandomizer aRoomRandomizer;</a>
<span class="sourceLineNo">023</span><a id="line.23">    private boolean aTest;</a>
<span class="sourceLineNo">024</span><a id="line.24">    private Room aAleaRoom;</a>
<span class="sourceLineNo">025</span><a id="line.25">    private String aImage;</a>
<span class="sourceLineNo">026</span><a id="line.26">    private boolean aIsSigne;</a>
<span class="sourceLineNo">027</span><a id="line.27">    /**</a>
<span class="sourceLineNo">028</span><a id="line.28">     * Constructeur d'objets de la classe GameEngine</a>
<span class="sourceLineNo">029</span><a id="line.29">     */</a>
<span class="sourceLineNo">030</span><a id="line.30">    public GameEngine(){</a>
<span class="sourceLineNo">031</span><a id="line.31">        this.aPlayer = new Player("Mercelino");</a>
<span class="sourceLineNo">032</span><a id="line.32">        this.aParser = new Parser();</a>
<span class="sourceLineNo">033</span><a id="line.33">        this.aRooms = new HashMap&lt;String, Room&gt;();</a>
<span class="sourceLineNo">034</span><a id="line.34">        this.createRooms();</a>
<span class="sourceLineNo">035</span><a id="line.35">        this.aCompteur = 48;</a>
<span class="sourceLineNo">036</span><a id="line.36">        this.aTest = false;</a>
<span class="sourceLineNo">037</span><a id="line.37">        this.aAleaRoom = null;</a>
<span class="sourceLineNo">038</span><a id="line.38">        this.aImage = "";</a>
<span class="sourceLineNo">039</span><a id="line.39">        this.aIsSigne = false;</a>
<span class="sourceLineNo">040</span><a id="line.40">    } // GameEngine()</a>
<span class="sourceLineNo">041</span><a id="line.41">    </a>
<span class="sourceLineNo">042</span><a id="line.42">    /**</a>
<span class="sourceLineNo">043</span><a id="line.43">     * CrÃ©e l'endroit d'insertion de l'image de la salle.</a>
<span class="sourceLineNo">044</span><a id="line.44">     */</a>
<span class="sourceLineNo">045</span><a id="line.45">    public void setGUI( final UserInterface pUserInterface )</a>
<span class="sourceLineNo">046</span><a id="line.46">    {</a>
<span class="sourceLineNo">047</span><a id="line.47">        this.aGui = pUserInterface;</a>
<span class="sourceLineNo">048</span><a id="line.48">        this.printWelcome();</a>
<span class="sourceLineNo">049</span><a id="line.49">    } // setGUI(.)</a>
<span class="sourceLineNo">050</span><a id="line.50">    </a>
<span class="sourceLineNo">051</span><a id="line.51">    /**</a>
<span class="sourceLineNo">052</span><a id="line.52">     * Affichage d'accueil du joueur.</a>
<span class="sourceLineNo">053</span><a id="line.53">     */</a>
<span class="sourceLineNo">054</span><a id="line.54">    private void printWelcome(){</a>
<span class="sourceLineNo">055</span><a id="line.55">        String vMess = "Bienvenue dans la station de mÃ©tro abandonnÃ©e! \n Le but du jeu est de sortir d'ici le plus vite possible.\n Ecris 'aide' si tu en as besoins.";</a>
<span class="sourceLineNo">056</span><a id="line.56">        this.aGui.println(vMess);</a>
<span class="sourceLineNo">057</span><a id="line.57">        this.printLocationInfo();</a>
<span class="sourceLineNo">058</span><a id="line.58">    } // printWelcome()</a>
<span class="sourceLineNo">059</span><a id="line.59">    </a>
<span class="sourceLineNo">060</span><a id="line.60">    /**</a>
<span class="sourceLineNo">061</span><a id="line.61">     * DÃ©claration des salles et des Items.</a>
<span class="sourceLineNo">062</span><a id="line.62">     */</a>
<span class="sourceLineNo">063</span><a id="line.63">    private void createRooms(){</a>
<span class="sourceLineNo">064</span><a id="line.64">        //initialisation de toutes les pieces disponibles</a>
<span class="sourceLineNo">065</span><a id="line.65">        </a>
<span class="sourceLineNo">066</span><a id="line.66">        this.aRooms.put("stationAban", new Room("dans une station de mÃ©tro abandonnÃ©e", "image/vStationAban.jpg"));</a>
<span class="sourceLineNo">067</span><a id="line.67">        this.aRooms.put("partieAr1",new Room("Ã  l'arriÃ¨re d'un mÃ©tro","image/vPartieAr1.jpg"));</a>
<span class="sourceLineNo">068</span><a id="line.68">        this.aRooms.put("partieAv1",new Room("Ã  l'avant d'un mÃ©tro","image/vPartieAv1.jpg"));</a>
<span class="sourceLineNo">069</span><a id="line.69">        this.aRooms.put("rails1",new Room("sur des rails","image/vRails1.jpg"));</a>
<span class="sourceLineNo">070</span><a id="line.70">        this.aRooms.put("passage",new Room("dans un passage par dessus la ligne de mÃ©tro","image/vPassage.jpg"));</a>
<span class="sourceLineNo">071</span><a id="line.71">        this.aRooms.put("controle",new Room("dans la salle de contrÃ´le","image/vControle.jpg"));</a>
<span class="sourceLineNo">072</span><a id="line.72">        this.aRooms.put("toit",new Room("sur le toit d'un mÃ©tro, vous pouvez descendre dans le trou","image/vToit.jpg"));</a>
<span class="sourceLineNo">073</span><a id="line.73">        this.aRooms.put("partieAr2",new Room("Ã  l'arriÃ¨re d'un mÃ©tro","image/vPartieAr2.jpg"));</a>
<span class="sourceLineNo">074</span><a id="line.74">        this.aRooms.put("rails2",new Room("sur des rails","image/vRails2.jpg"));</a>
<span class="sourceLineNo">075</span><a id="line.75">        this.aRooms.put("partieAv2",new Room("Ã  l'avant d'un mÃ©tro","image/vPartieAv2.jpg"));</a>
<span class="sourceLineNo">076</span><a id="line.76">        this.aRooms.put("croisement",new Room("dans un croisement entre deux lignes de mÃ©tro","image/vCroisement.jpg"));</a>
<span class="sourceLineNo">077</span><a id="line.77">        this.aRooms.put("rails4",new Room("sur des rails","image/vRails4.jpg"));</a>
<span class="sourceLineNo">078</span><a id="line.78">        this.aRooms.put("rails3",new Room("sur des rails","image/vRails3.jpg"));</a>
<span class="sourceLineNo">079</span><a id="line.79">        this.aRooms.put("stationActive",new Room("dans une station de mÃ©tro active","image/vSortieActive.jpg"));</a>
<span class="sourceLineNo">080</span><a id="line.80">        this.aRooms.put("sortie",new Room("sortie de la station, fÃ©licitaions !","image/vSortie.jpg"));</a>
<span class="sourceLineNo">081</span><a id="line.81">        this.aRooms.put("rails5",new Room("sur des rails","image/vRails5.jpg"));</a>
<span class="sourceLineNo">082</span><a id="line.82">        this.aRooms.put("guichet",new Room("dans un ancien guichet de mÃ©tro, il y a peu Ãªtre des alarmes si vous continuez","image/vGuichet.jpg"));</a>
<span class="sourceLineNo">083</span><a id="line.83">        this.aRooms.put("fausseSortie",new Room("vous venez de sortir du mÃ©tro mais une alarme Ã  Ã©tÃ© activÃ©, attendez l'arrivÃ©e de la police","image/vFausseSortie.jpg"));</a>
<span class="sourceLineNo">084</span><a id="line.84">        this.aRooms.put("sortiePlusBouchee",new Room("vous avez rÃ©ussi a crÃ©er un passage pour sortir. C'est gagnÃ©!","image/vFausseSortie.jpg"));</a>
<span class="sourceLineNo">085</span><a id="line.85">        </a>
<span class="sourceLineNo">086</span><a id="line.86">        Item vraiePioche = new Item("vraiePioche", " C'est une pioche qui peut nous permettre de dÃ©bloquer un passage qui est bouchÃ©",250);</a>
<span class="sourceLineNo">087</span><a id="line.87">        </a>
<span class="sourceLineNo">088</span><a id="line.88">        this.aPlayer.setVerif(); //Permet de crÃ©er le mÃªme Item que la clÃ© pour ajouter la clÃ© dans l'inventaire quand le joueur Ã  tout ce qu'il faut.</a>
<span class="sourceLineNo">089</span><a id="line.89">        </a>
<span class="sourceLineNo">090</span><a id="line.90">        Item vNavigo = new Item("navigo", " C'est une carte NAVIGO qui peut servir pour sortir du mÃ©tro",10);</a>
<span class="sourceLineNo">091</span><a id="line.91">        </a>
<span class="sourceLineNo">092</span><a id="line.92">        Door vSortie = new Door("si vous essayez de sortir de cette station sans carte .\n faites attention !","image/vSortie.jpg",vNavigo);</a>
<span class="sourceLineNo">093</span><a id="line.93">        </a>
<span class="sourceLineNo">094</span><a id="line.94">        Item vPioche = new Item("pioche", " C'est une pioche qui peut nous permettre de dÃ©bloquer un passage qui est bouchÃ©",250);</a>
<span class="sourceLineNo">095</span><a id="line.95">        </a>
<span class="sourceLineNo">096</span><a id="line.96">        Door vSortieBouchee = new Door("vous Ãªtes devant une sortie qui a Ã©tÃ© bouchÃ©e par des dÃ©combre. Si seulement vous aviez un outil pour tout nettoyer","image/vFausseSortie.jpg",vraiePioche);</a>
<span class="sourceLineNo">097</span><a id="line.97">        </a>
<span class="sourceLineNo">098</span><a id="line.98">        this.aRoomRandomizer = new RoomRandomizer(this.aRooms);</a>
<span class="sourceLineNo">099</span><a id="line.99">        Room vTeleportation = new TransporterRoom("Vous pouvez vous tÃ©lÃ©porter n'importe oÃ¹ alÃ©atoirement .\n si vous touchez l'oeuvre en face de vous et que vous quittez la salle.","image/teleportation.jpg", this.aRoomRandomizer);</a>
<span class="sourceLineNo">100</span><a id="line.100">        </a>
<span class="sourceLineNo">101</span><a id="line.101">        </a>
<span class="sourceLineNo">102</span><a id="line.102">        //initialisation de toutes les sorties des pieces</a>
<span class="sourceLineNo">103</span><a id="line.103">        this.aRooms.get("stationAban").setExits("monte",this.aRooms.get("passage"));</a>
<span class="sourceLineNo">104</span><a id="line.104">        this.aRooms.get("stationAban").setExits("est",this.aRooms.get("rails1"));</a>
<span class="sourceLineNo">105</span><a id="line.105">        this.aRooms.get("stationAban").setExits("ouest",this.aRooms.get("partieAv1"));</a>
<span class="sourceLineNo">106</span><a id="line.106">        this.aRooms.get("stationAban").setExits("monteNE",this.aRooms.get("guichet"));</a>
<span class="sourceLineNo">107</span><a id="line.107">        </a>
<span class="sourceLineNo">108</span><a id="line.108">        this.aRooms.get("partieAr1").setExits("est",this.aRooms.get("partieAv1"));</a>
<span class="sourceLineNo">109</span><a id="line.109">        this.aRooms.get("partieAr1").setExits("ouest",this.aRooms.get("rails5"));</a>
<span class="sourceLineNo">110</span><a id="line.110">        </a>
<span class="sourceLineNo">111</span><a id="line.111">        this.aRooms.get("partieAv1").setExits("sud",this.aRooms.get("stationAban"));</a>
<span class="sourceLineNo">112</span><a id="line.112">        this.aRooms.get("partieAv1").setExits("ouest",this.aRooms.get("partieAr1"));</a>
<span class="sourceLineNo">113</span><a id="line.113">        </a>
<span class="sourceLineNo">114</span><a id="line.114">        //this.aRooms.get("rails1").setExits("est",this.aRooms.get("controle"));</a>
<span class="sourceLineNo">115</span><a id="line.115">        this.aRooms.get("rails1").setExits("ouest",this.aRooms.get("stationAban"));</a>
<span class="sourceLineNo">116</span><a id="line.116">        </a>
<span class="sourceLineNo">117</span><a id="line.117">        this.aRooms.get("passage").setExits("bas",this.aRooms.get("toit"));</a>
<span class="sourceLineNo">118</span><a id="line.118">        this.aRooms.get("passage").setExits("descendEst",this.aRooms.get("controle"));</a>
<span class="sourceLineNo">119</span><a id="line.119">        this.aRooms.get("passage").setExits("descendOuest",this.aRooms.get("stationAban"));</a>
<span class="sourceLineNo">120</span><a id="line.120">        </a>
<span class="sourceLineNo">121</span><a id="line.121">        this.aRooms.get("controle").setExits("monte",this.aRooms.get("passage"));</a>
<span class="sourceLineNo">122</span><a id="line.122">        this.aRooms.get("controle").setExits("nord",this.aRooms.get("rails1"));</a>
<span class="sourceLineNo">123</span><a id="line.123">        </a>
<span class="sourceLineNo">124</span><a id="line.124">        this.aRooms.get("toit").setExits("bas",this.aRooms.get("partieAr2"));</a>
<span class="sourceLineNo">125</span><a id="line.125">        </a>
<span class="sourceLineNo">126</span><a id="line.126">        this.aRooms.get("partieAr2").setExits("est",this.aRooms.get("rails2"));</a>
<span class="sourceLineNo">127</span><a id="line.127">        this.aRooms.get("partieAr2").setExits("ouest",this.aRooms.get("partieAv2"));</a>
<span class="sourceLineNo">128</span><a id="line.128">        </a>
<span class="sourceLineNo">129</span><a id="line.129">        this.aRooms.get("rails2").setExits("ouest",this.aRooms.get("partieAr2"));</a>
<span class="sourceLineNo">130</span><a id="line.130">        this.aRooms.get("rails2").setExits("sud",vSortieBouchee);</a>
<span class="sourceLineNo">131</span><a id="line.131">        this.aRooms.get("rails2").setExits("nord",this.aRooms.get("rails1"));</a>
<span class="sourceLineNo">132</span><a id="line.132">        </a>
<span class="sourceLineNo">133</span><a id="line.133">        this.aRooms.get("partieAv2").setExits("est",this.aRooms.get("partieAr2"));</a>
<span class="sourceLineNo">134</span><a id="line.134">        this.aRooms.get("partieAv2").setExits("ouest",this.aRooms.get("croisement"));</a>
<span class="sourceLineNo">135</span><a id="line.135">        </a>
<span class="sourceLineNo">136</span><a id="line.136">        this.aRooms.get("croisement").setExits("nord",this.aRooms.get("rails3"));</a>
<span class="sourceLineNo">137</span><a id="line.137">        this.aRooms.get("croisement").setExits("sud",this.aRooms.get("rails4"));</a>
<span class="sourceLineNo">138</span><a id="line.138">        this.aRooms.get("croisement").setExits("est",this.aRooms.get("partieAv2"));</a>
<span class="sourceLineNo">139</span><a id="line.139">        </a>
<span class="sourceLineNo">140</span><a id="line.140">        </a>
<span class="sourceLineNo">141</span><a id="line.141">        this.aRooms.get("rails4").setExits("nord",this.aRooms.get("croisement"));</a>
<span class="sourceLineNo">142</span><a id="line.142">        this.aRooms.get("rails4").setExits("ouest",vTeleportation);</a>
<span class="sourceLineNo">143</span><a id="line.143">        </a>
<span class="sourceLineNo">144</span><a id="line.144">        vTeleportation.setExits("sortir",this.aRooms.get(null));</a>
<span class="sourceLineNo">145</span><a id="line.145">        </a>
<span class="sourceLineNo">146</span><a id="line.146">        this.aRooms.get("rails3").setExits("nord",this.aRooms.get("stationActive"));</a>
<span class="sourceLineNo">147</span><a id="line.147">        </a>
<span class="sourceLineNo">148</span><a id="line.148">        this.aRooms.get("stationActive").setExits("sud",this.aRooms.get("rails3"));</a>
<span class="sourceLineNo">149</span><a id="line.149">        this.aRooms.get("stationActive").setExits("ouest",vSortie);</a>
<span class="sourceLineNo">150</span><a id="line.150">        this.aRooms.get("stationActive").setExits("nord",this.aRooms.get("rails5"));</a>
<span class="sourceLineNo">151</span><a id="line.151">        </a>
<span class="sourceLineNo">152</span><a id="line.152">        vSortieBouchee.setExits("sud",this.aRooms.get("sortiePlusBouchee"));</a>
<span class="sourceLineNo">153</span><a id="line.153">        </a>
<span class="sourceLineNo">154</span><a id="line.154">        vSortie.setExits("ouest",this.aRooms.get("sortie"));</a>
<span class="sourceLineNo">155</span><a id="line.155">        </a>
<span class="sourceLineNo">156</span><a id="line.156">        this.aRooms.get("guichet").setExits("est",this.aRooms.get("fausseSortie"));</a>
<span class="sourceLineNo">157</span><a id="line.157">        this.aRooms.get("guichet").setExits("descendSO", this.aRooms.get("stationAban"));</a>
<span class="sourceLineNo">158</span><a id="line.158">        </a>
<span class="sourceLineNo">159</span><a id="line.159">        this.aRooms.get("rails5").setExits("est",this.aRooms.get("partieAr1"));</a>
<span class="sourceLineNo">160</span><a id="line.160">        </a>
<span class="sourceLineNo">161</span><a id="line.161">        // Initialisation du lieu courant</a>
<span class="sourceLineNo">162</span><a id="line.162">        this.aPlayer.setCurrentRoom(this.aRooms.get("stationAban"));</a>
<span class="sourceLineNo">163</span><a id="line.163">        </a>
<span class="sourceLineNo">164</span><a id="line.164">        //ajouts des items dans quelques piÃ¨ces</a>
<span class="sourceLineNo">165</span><a id="line.165">        this.aRooms.get("stationAban").addItem(new Beamer("beamer", " Cet objet permet de te tÃ©lÃ©porter dans la salle oÃ¹ tu veux. \n Mais qu'une seule fois !",15,this));</a>
<span class="sourceLineNo">166</span><a id="line.166">        </a>
<span class="sourceLineNo">167</span><a id="line.167">        this.aRooms.get("rails5").addItem(new Item("cerealeChoco", " C'est une barre de cÃ©rÃ©ale qui peut nous permettre d'avoir assez d'Ã©nergie si on la mange",90));</a>
<span class="sourceLineNo">168</span><a id="line.168">        this.aRooms.get("rails5").addItem(new Item("cerealeFruit", " C'est une barre de cÃ©rÃ©ale qui peut nous permettre d'avoir assez d'Ã©nergie si on la mange",90));</a>
<span class="sourceLineNo">169</span><a id="line.169">        </a>
<span class="sourceLineNo">170</span><a id="line.170">        this.aRooms.get("partieAr1").addItem(new Item("feuille", " C'est une feuille qui pourras Ãªtre signÃ©e",10));</a>
<span class="sourceLineNo">171</span><a id="line.171">        this.aRooms.get("partieAr1").addItem(new Item("stylo", " ce stylo peut Ãªtre utile dans cette piÃ¨ce",10));</a>
<span class="sourceLineNo">172</span><a id="line.172">        </a>
<span class="sourceLineNo">173</span><a id="line.173">        </a>
<span class="sourceLineNo">174</span><a id="line.174">        this.aRooms.get("guichet").addItem(new Item("cerealeNoix", " C'est une barre de cÃ©rÃ©ale qui peut nous permettre d'avoir assez d'Ã©nergie si on la mange",90));</a>
<span class="sourceLineNo">175</span><a id="line.175">        this.aRooms.get("guichet").addItem(vPioche);</a>
<span class="sourceLineNo">176</span><a id="line.176">        </a>
<span class="sourceLineNo">177</span><a id="line.177">        </a>
<span class="sourceLineNo">178</span><a id="line.178">        </a>
<span class="sourceLineNo">179</span><a id="line.179">        </a>
<span class="sourceLineNo">180</span><a id="line.180">        this.aRooms.get("controle").addItem(new Item("bouteilleEau", " C'est une bouteille d'eau qui peut nous permettre d'avoir plus d'Ã©nergie si on la boit",500));</a>
<span class="sourceLineNo">181</span><a id="line.181">        this.aRooms.get("controle").addItem(new Item("carte", " C'est une carte des ligne de mÃ©tro pour se repÃ©rer plus facilement dans la galeries",25));</a>
<span class="sourceLineNo">182</span><a id="line.182">        </a>
<span class="sourceLineNo">183</span><a id="line.183">        this.aRooms.get("rails3").addItem(new Item("bouteille", " C'est une bouteille d'eau qui peut nous permettre d'avoir plus d'Ã©nergie si on la boit",500));</a>
<span class="sourceLineNo">184</span><a id="line.184">        </a>
<span class="sourceLineNo">185</span><a id="line.185">        this.aRooms.get("partieAr2").addItem(new Item("bouteilleFraiche", " C'est une bouteille d'eau qui peut nous permettre d'avoir plus d'Ã©nergie si on la boit",500));</a>
<span class="sourceLineNo">186</span><a id="line.186">        </a>
<span class="sourceLineNo">187</span><a id="line.187">        this.aRooms.get("partieAv2").addItem(new Item("cereale", " C'est une barre de cÃ©rÃ©ale qui peut nous permettre d'avoir assez d'Ã©nergie si on la mange",90));</a>
<span class="sourceLineNo">188</span><a id="line.188">        </a>
<span class="sourceLineNo">189</span><a id="line.189">        this.aRooms.get("passage").addItem(new Item("cookie", " C'est un cookie qui donne beaucoup de force",30));</a>
<span class="sourceLineNo">190</span><a id="line.190">        </a>
<span class="sourceLineNo">191</span><a id="line.191">        this.aRooms.get("rails2").addItem(new Item("chiot", " C'est un chiot qui a Ã©tÃ© abandonnÃ©",300));</a>
<span class="sourceLineNo">192</span><a id="line.192">        this.aRooms.get("rails2").addItem(new Item("porte-feuille", " C'est un porte-feuille qui a Ã©tÃ© perdu",150));</a>
<span class="sourceLineNo">193</span><a id="line.193">        </a>
<span class="sourceLineNo">194</span><a id="line.194">        this.aRooms.get("toit").addItem(vNavigo);</a>
<span class="sourceLineNo">195</span><a id="line.195">        </a>
<span class="sourceLineNo">196</span><a id="line.196">    } // createRooms()</a>
<span class="sourceLineNo">197</span><a id="line.197">    </a>
<span class="sourceLineNo">198</span><a id="line.198">   /**</a>
<span class="sourceLineNo">199</span><a id="line.199">    * Traite (c'est-Ã -dire: exÃ©cute) la commande donnÃ©e.</a>
<span class="sourceLineNo">200</span><a id="line.200">    * Si cette commande met fin au jeu, 'true' est retournÃ©,</a>
<span class="sourceLineNo">201</span><a id="line.201">    * Sinon 'false' est retournÃ©.</a>
<span class="sourceLineNo">202</span><a id="line.202">    */</a>
<span class="sourceLineNo">203</span><a id="line.203">   public void interpretCommand( final String pCommandLine )</a>
<span class="sourceLineNo">204</span><a id="line.204">   {</a>
<span class="sourceLineNo">205</span><a id="line.205">        this.aGui.println( "&gt; " + pCommandLine );</a>
<span class="sourceLineNo">206</span><a id="line.206">        Command vCommand = this.aParser.getCommand( pCommandLine );</a>
<span class="sourceLineNo">207</span><a id="line.207"></a>
<span class="sourceLineNo">208</span><a id="line.208">        if ( vCommand.isUnknown() ) {</a>
<span class="sourceLineNo">209</span><a id="line.209">            this.aGui.println( "Je ne sais pas ce que tu veux dire..." );</a>
<span class="sourceLineNo">210</span><a id="line.210">            return;</a>
<span class="sourceLineNo">211</span><a id="line.211">        }</a>
<span class="sourceLineNo">212</span><a id="line.212"></a>
<span class="sourceLineNo">213</span><a id="line.213">        String vCommandWord = vCommand.getCommandWord();</a>
<span class="sourceLineNo">214</span><a id="line.214">        if ( vCommandWord.equals( "aide" ) )</a>
<span class="sourceLineNo">215</span><a id="line.215">            this.printHelp(vCommand);</a>
<span class="sourceLineNo">216</span><a id="line.216">        else if ( vCommandWord.equals( "vas" ) )</a>
<span class="sourceLineNo">217</span><a id="line.217">            this.goRoom( vCommand );</a>
<span class="sourceLineNo">218</span><a id="line.218">        else if ( vCommandWord.equals( "regarder" ) )</a>
<span class="sourceLineNo">219</span><a id="line.219">            this.look(vCommand);</a>
<span class="sourceLineNo">220</span><a id="line.220">        else if ( vCommandWord.equals( "boire" ) )</a>
<span class="sourceLineNo">221</span><a id="line.221">            this.boire(vCommand);</a>
<span class="sourceLineNo">222</span><a id="line.222">        else if ( vCommandWord.equals( "manger" ) )</a>
<span class="sourceLineNo">223</span><a id="line.223">            this.manger(vCommand);</a>
<span class="sourceLineNo">224</span><a id="line.224">        else if ( vCommandWord.equals( "prendre" ) )</a>
<span class="sourceLineNo">225</span><a id="line.225">            this.prendre(vCommand);</a>
<span class="sourceLineNo">226</span><a id="line.226">        else if ( vCommandWord.equals( "lacher" ) )</a>
<span class="sourceLineNo">227</span><a id="line.227">            this.lacher(vCommand);</a>
<span class="sourceLineNo">228</span><a id="line.228">        else if ( vCommandWord.equals( "arriere" ) )</a>
<span class="sourceLineNo">229</span><a id="line.229">            this.back(vCommand);</a>
<span class="sourceLineNo">230</span><a id="line.230">        else if (vCommandWord.equals("test"))</a>
<span class="sourceLineNo">231</span><a id="line.231">            this.test(vCommand);</a>
<span class="sourceLineNo">232</span><a id="line.232">        else if (vCommandWord.equals("charger"))</a>
<span class="sourceLineNo">233</span><a id="line.233">            this.charge(vCommand);</a>
<span class="sourceLineNo">234</span><a id="line.234">        else if (vCommandWord.equals("feu"))</a>
<span class="sourceLineNo">235</span><a id="line.235">            this.fire(vCommand);</a>
<span class="sourceLineNo">236</span><a id="line.236">        else if (vCommandWord.equals("alea"))</a>
<span class="sourceLineNo">237</span><a id="line.237">            this.alea(vCommand);</a>
<span class="sourceLineNo">238</span><a id="line.238">        else if (vCommandWord.equals("inventaire"))</a>
<span class="sourceLineNo">239</span><a id="line.239">            this.printItem(vCommand);</a>
<span class="sourceLineNo">240</span><a id="line.240">        else if (vCommandWord.equals("energie"))</a>
<span class="sourceLineNo">241</span><a id="line.241">            this.printEnergie(vCommand);</a>
<span class="sourceLineNo">242</span><a id="line.242">        else if (vCommandWord.equals("afficherCarte"))</a>
<span class="sourceLineNo">243</span><a id="line.243">            this.afficherCarte(vCommand);</a>
<span class="sourceLineNo">244</span><a id="line.244">        else if (vCommandWord.equals("enleverCarte"))</a>
<span class="sourceLineNo">245</span><a id="line.245">            this.enleverCarte(vCommand);</a>
<span class="sourceLineNo">246</span><a id="line.246">        else if (vCommandWord.equals("signer"))</a>
<span class="sourceLineNo">247</span><a id="line.247">            this.signer(vCommand);</a>
<span class="sourceLineNo">248</span><a id="line.248">        else if ( vCommandWord.equals( "stop" ) ) {</a>
<span class="sourceLineNo">249</span><a id="line.249">            if ( vCommand.hasSecondWord() )</a>
<span class="sourceLineNo">250</span><a id="line.250">                this.aGui.println( "Que veux-tu quitter ?" );</a>
<span class="sourceLineNo">251</span><a id="line.251">            else</a>
<span class="sourceLineNo">252</span><a id="line.252">                this.endGame();</a>
<span class="sourceLineNo">253</span><a id="line.253">        }</a>
<span class="sourceLineNo">254</span><a id="line.254">    } // interpretCommand(.)</a>
<span class="sourceLineNo">255</span><a id="line.255">    </a>
<span class="sourceLineNo">256</span><a id="line.256">    /**</a>
<span class="sourceLineNo">257</span><a id="line.257">     * La commande fire permet d'utiliser un item.</a>
<span class="sourceLineNo">258</span><a id="line.258">     */</a>
<span class="sourceLineNo">259</span><a id="line.259">    private void fire(final Command pCommand)</a>
<span class="sourceLineNo">260</span><a id="line.260">    {</a>
<span class="sourceLineNo">261</span><a id="line.261">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">262</span><a id="line.262">            this.aGui.println(this.aPlayer.fire(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">263</span><a id="line.263">        }</a>
<span class="sourceLineNo">264</span><a id="line.264">        else{</a>
<span class="sourceLineNo">265</span><a id="line.265">            this.aGui.println("Merci d'indiquer le nom de l'objet que vous voulez utiliser.");</a>
<span class="sourceLineNo">266</span><a id="line.266">        }</a>
<span class="sourceLineNo">267</span><a id="line.267">    } // fire(.)</a>
<span class="sourceLineNo">268</span><a id="line.268">    </a>
<span class="sourceLineNo">269</span><a id="line.269">    /**</a>
<span class="sourceLineNo">270</span><a id="line.270">     * La commande load permet de charger un item.</a>
<span class="sourceLineNo">271</span><a id="line.271">     */</a>
<span class="sourceLineNo">272</span><a id="line.272">    private void charge(final Command pCommand)</a>
<span class="sourceLineNo">273</span><a id="line.273">    {</a>
<span class="sourceLineNo">274</span><a id="line.274">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">275</span><a id="line.275">            this.aGui.println(this.aPlayer.charge(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">276</span><a id="line.276">        }</a>
<span class="sourceLineNo">277</span><a id="line.277">        else{</a>
<span class="sourceLineNo">278</span><a id="line.278">            this.aGui.println("Merci d'indiquer le nom de l'objet que tu veux charger.");</a>
<span class="sourceLineNo">279</span><a id="line.279">        }</a>
<span class="sourceLineNo">280</span><a id="line.280">    } // charge(.)</a>
<span class="sourceLineNo">281</span><a id="line.281">    </a>
<span class="sourceLineNo">282</span><a id="line.282">    /**</a>
<span class="sourceLineNo">283</span><a id="line.283">     * Permet de prendre la feuille dans les mains et de la signer </a>
<span class="sourceLineNo">284</span><a id="line.284">     * Si le joueur a les bons items dans son inventaire.</a>
<span class="sourceLineNo">285</span><a id="line.285">     */</a>
<span class="sourceLineNo">286</span><a id="line.286">    private void signer(final Command pCommand){</a>
<span class="sourceLineNo">287</span><a id="line.287">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">288</span><a id="line.288">            this.aGui.println("'signer' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">289</span><a id="line.289">        }</a>
<span class="sourceLineNo">290</span><a id="line.290">        else{</a>
<span class="sourceLineNo">291</span><a id="line.291">            if(!this.aIsSigne){//Permet de vÃ©rifier quelle image il faut afficher Ã  l'Ã©cran.</a>
<span class="sourceLineNo">292</span><a id="line.292">                if(aPlayer.isStylo().equals("bon")){</a>
<span class="sourceLineNo">293</span><a id="line.293">                    if(this.isFeuille()){</a>
<span class="sourceLineNo">294</span><a id="line.294">                        this.aGui.showImage("image/feuilleSigne.jpg");</a>
<span class="sourceLineNo">295</span><a id="line.295">                        this.aImage = "image/feuilleSigne.jpg";</a>
<span class="sourceLineNo">296</span><a id="line.296">                        this.aGui.println("Tu viens de signer la preuve de ton passage ici.");</a>
<span class="sourceLineNo">297</span><a id="line.297">                        this.aIsSigne = true;</a>
<span class="sourceLineNo">298</span><a id="line.298">                        this.aPlayer.estSigne();</a>
<span class="sourceLineNo">299</span><a id="line.299">                    }</a>
<span class="sourceLineNo">300</span><a id="line.300">                    else if(this.isFeuilleSigne()){</a>
<span class="sourceLineNo">301</span><a id="line.301">                        this.aGui.println("Tu ne peux pas signer une feuille que tu as dÃ©ja signÃ©e.");</a>
<span class="sourceLineNo">302</span><a id="line.302">                    }</a>
<span class="sourceLineNo">303</span><a id="line.303">                    else{</a>
<span class="sourceLineNo">304</span><a id="line.304">                        this.aGui.showImage("image/feuille.jpg");</a>
<span class="sourceLineNo">305</span><a id="line.305">                        this.aImage = "image/feuille.jpg";</a>
<span class="sourceLineNo">306</span><a id="line.306">                        this.aGui.println("que veux tu faire avec la feuille dans les mains ?");</a>
<span class="sourceLineNo">307</span><a id="line.307">                    }</a>
<span class="sourceLineNo">308</span><a id="line.308">                    </a>
<span class="sourceLineNo">309</span><a id="line.309">                }</a>
<span class="sourceLineNo">310</span><a id="line.310">                else if(aPlayer.isStylo().equals("pas stylo")){</a>
<span class="sourceLineNo">311</span><a id="line.311">                    this.aGui.println("Tu ne peux pas signer si tu n'as pas de stylo.");</a>
<span class="sourceLineNo">312</span><a id="line.312">                }</a>
<span class="sourceLineNo">313</span><a id="line.313">                else if(aPlayer.isStylo().equals("pas feuille")){</a>
<span class="sourceLineNo">314</span><a id="line.314">                    this.aGui.println("Tu ne peux pas signer si tu n'as pas de feuille.");</a>
<span class="sourceLineNo">315</span><a id="line.315">                }</a>
<span class="sourceLineNo">316</span><a id="line.316">                else{</a>
<span class="sourceLineNo">317</span><a id="line.317">                    this.aGui.println("Tu ne peux pas signer si tu n'as rien pour le faire.");</a>
<span class="sourceLineNo">318</span><a id="line.318">                }</a>
<span class="sourceLineNo">319</span><a id="line.319">            }</a>
<span class="sourceLineNo">320</span><a id="line.320">            else{</a>
<span class="sourceLineNo">321</span><a id="line.321">                this.aGui.println("Tu as dÃ©ja signÃ© la feuille.");</a>
<span class="sourceLineNo">322</span><a id="line.322">            }</a>
<span class="sourceLineNo">323</span><a id="line.323">        }</a>
<span class="sourceLineNo">324</span><a id="line.324">    } // signer(.)</a>
<span class="sourceLineNo">325</span><a id="line.325">    </a>
<span class="sourceLineNo">326</span><a id="line.326">    /**</a>
<span class="sourceLineNo">327</span><a id="line.327">     * Permet de savoir si le joueur a dÃ©ja la feuille non-signÃ©e dans les mains.</a>
<span class="sourceLineNo">328</span><a id="line.328">     */</a>
<span class="sourceLineNo">329</span><a id="line.329">    private boolean isFeuille(){</a>
<span class="sourceLineNo">330</span><a id="line.330">        if(aImage.equals("image/feuille.jpg")){</a>
<span class="sourceLineNo">331</span><a id="line.331">            return true;</a>
<span class="sourceLineNo">332</span><a id="line.332">        }</a>
<span class="sourceLineNo">333</span><a id="line.333">        else return false;</a>
<span class="sourceLineNo">334</span><a id="line.334">    } // isFeuille()</a>
<span class="sourceLineNo">335</span><a id="line.335">    </a>
<span class="sourceLineNo">336</span><a id="line.336">    /**</a>
<span class="sourceLineNo">337</span><a id="line.337">     * Permet de savoir si le joueur a signÃ© la feuille.</a>
<span class="sourceLineNo">338</span><a id="line.338">     */</a>
<span class="sourceLineNo">339</span><a id="line.339">    private boolean isFeuilleSigne(){</a>
<span class="sourceLineNo">340</span><a id="line.340">        if(aImage.equals("image/feuilleSigne.jpg")){</a>
<span class="sourceLineNo">341</span><a id="line.341">            return true;</a>
<span class="sourceLineNo">342</span><a id="line.342">        }</a>
<span class="sourceLineNo">343</span><a id="line.343">        else return false;</a>
<span class="sourceLineNo">344</span><a id="line.344">    } // isFeuilleSigne()</a>
<span class="sourceLineNo">345</span><a id="line.345">    </a>
<span class="sourceLineNo">346</span><a id="line.346">    /**</a>
<span class="sourceLineNo">347</span><a id="line.347">     * Permet d'afficher une carte pour aider le joueur.</a>
<span class="sourceLineNo">348</span><a id="line.348">     */</a>
<span class="sourceLineNo">349</span><a id="line.349">    private void afficherCarte(final Command pCommand){</a>
<span class="sourceLineNo">350</span><a id="line.350">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">351</span><a id="line.351">            this.aGui.println("'afficherCarte' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">352</span><a id="line.352">        }</a>
<span class="sourceLineNo">353</span><a id="line.353">        else{</a>
<span class="sourceLineNo">354</span><a id="line.354">            if(this.aPlayer.isCarte()){</a>
<span class="sourceLineNo">355</span><a id="line.355">                if(this.aImage.equals("image/planV2.jpg")){</a>
<span class="sourceLineNo">356</span><a id="line.356">                    this.aGui.println("Tu affiche dÃ©jÃ  la carte.");</a>
<span class="sourceLineNo">357</span><a id="line.357">                }</a>
<span class="sourceLineNo">358</span><a id="line.358">                else{</a>
<span class="sourceLineNo">359</span><a id="line.359">                    this.aPlayer.carteUtilise();</a>
<span class="sourceLineNo">360</span><a id="line.360">                    this.aGui.showImage("image/planV2.jpg");</a>
<span class="sourceLineNo">361</span><a id="line.361">                    this.aImage = "image/planV2.jpg";</a>
<span class="sourceLineNo">362</span><a id="line.362">                    this.aGui.println("tu as affichÃ© la carte.");</a>
<span class="sourceLineNo">363</span><a id="line.363">                }</a>
<span class="sourceLineNo">364</span><a id="line.364">            }</a>
<span class="sourceLineNo">365</span><a id="line.365">            else this.aGui.println("Tu dois d'abord trouver la carte pour l'afficher.");</a>
<span class="sourceLineNo">366</span><a id="line.366">        }</a>
<span class="sourceLineNo">367</span><a id="line.367">    } // afficherCarte(.)</a>
<span class="sourceLineNo">368</span><a id="line.368">    </a>
<span class="sourceLineNo">369</span><a id="line.369">    /**</a>
<span class="sourceLineNo">370</span><a id="line.370">     * Permet d'enlever la carte que le joueur a fait afficher Ã  l'Ã©cran.</a>
<span class="sourceLineNo">371</span><a id="line.371">     */</a>
<span class="sourceLineNo">372</span><a id="line.372">    private void enleverCarte(final Command pCommand){</a>
<span class="sourceLineNo">373</span><a id="line.373">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">374</span><a id="line.374">            this.aGui.println("'enleverCarte' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">375</span><a id="line.375">        }</a>
<span class="sourceLineNo">376</span><a id="line.376">        else{</a>
<span class="sourceLineNo">377</span><a id="line.377">            if(this.aPlayer.isCarte()){</a>
<span class="sourceLineNo">378</span><a id="line.378">                if(!this.aImage.equals("image/planV2.jpg")){ // Permet de savoir quand la carte est encore affichÃ©e Ã  l'Ã©cran.</a>
<span class="sourceLineNo">379</span><a id="line.379">                    this.aGui.println("tu ne peux pas enlever une carte non affichÃ©e.");</a>
<span class="sourceLineNo">380</span><a id="line.380">                }</a>
<span class="sourceLineNo">381</span><a id="line.381">                else{</a>
<span class="sourceLineNo">382</span><a id="line.382">                    this.aGui.showImage(this.aPlayer.getCurrentRoom().getImageName()); </a>
<span class="sourceLineNo">383</span><a id="line.383">                    this.aImage = this.aPlayer.getCurrentRoom().getImageName();</a>
<span class="sourceLineNo">384</span><a id="line.384">                    this.aGui.println("tu as enlevÃ© la carte.");</a>
<span class="sourceLineNo">385</span><a id="line.385">                }</a>
<span class="sourceLineNo">386</span><a id="line.386">            }</a>
<span class="sourceLineNo">387</span><a id="line.387">            else this.aGui.println("Tu dois d'abord trouver la carte puis l'afficher pour l'enlever.");</a>
<span class="sourceLineNo">388</span><a id="line.388">        }</a>
<span class="sourceLineNo">389</span><a id="line.389">    } // enleverCarte(.)</a>
<span class="sourceLineNo">390</span><a id="line.390">    </a>
<span class="sourceLineNo">391</span><a id="line.391">    /**</a>
<span class="sourceLineNo">392</span><a id="line.392">     * Permet d'afficher la liste d'item que le joueur a dans son inventaire.</a>
<span class="sourceLineNo">393</span><a id="line.393">     */</a>
<span class="sourceLineNo">394</span><a id="line.394">    private void printItem(final Command pCommand){</a>
<span class="sourceLineNo">395</span><a id="line.395">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">396</span><a id="line.396">            this.aGui.println("'inventaire' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">397</span><a id="line.397">        }</a>
<span class="sourceLineNo">398</span><a id="line.398">        else{</a>
<span class="sourceLineNo">399</span><a id="line.399">            String vMess = "Tu ne sais plus quels objets tu as dans ton inventaire ? \n \n Voici tes Items de disponibles: " ;</a>
<span class="sourceLineNo">400</span><a id="line.400">            this.aGui.println(vMess + this.aPlayer.showItems());</a>
<span class="sourceLineNo">401</span><a id="line.401">        }</a>
<span class="sourceLineNo">402</span><a id="line.402">    } // printItem(.)</a>
<span class="sourceLineNo">403</span><a id="line.403">    </a>
<span class="sourceLineNo">404</span><a id="line.404">    /**</a>
<span class="sourceLineNo">405</span><a id="line.405">     * Permet d'indiquer au joueur l'Ã©nergie qu'il lui reste.</a>
<span class="sourceLineNo">406</span><a id="line.406">     */</a>
<span class="sourceLineNo">407</span><a id="line.407">    private void printEnergie(final Command pCommand){</a>
<span class="sourceLineNo">408</span><a id="line.408">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">409</span><a id="line.409">            this.aGui.println("'energie' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">410</span><a id="line.410">        }</a>
<span class="sourceLineNo">411</span><a id="line.411">        else{</a>
<span class="sourceLineNo">412</span><a id="line.412">            String vMess = "Tu veux savoir ton Ã©tat de fatigue ? \n \n Voici ton Ã©nergie: " ;</a>
<span class="sourceLineNo">413</span><a id="line.413">            this.aGui.println(vMess + this.aPlayer.showEnergie());</a>
<span class="sourceLineNo">414</span><a id="line.414">        }</a>
<span class="sourceLineNo">415</span><a id="line.415">    } // printEnergie(.)</a>
<span class="sourceLineNo">416</span><a id="line.416">    </a>
<span class="sourceLineNo">417</span><a id="line.417">    /**</a>
<span class="sourceLineNo">418</span><a id="line.418">     * Affichage du message d'aide, lorsque le joueur tape la commande 'aide'.</a>
<span class="sourceLineNo">419</span><a id="line.419">     */</a>
<span class="sourceLineNo">420</span><a id="line.420">    private void printHelp(final Command pCommand){</a>
<span class="sourceLineNo">421</span><a id="line.421">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">422</span><a id="line.422">            this.aGui.println("'aide' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">423</span><a id="line.423">        }</a>
<span class="sourceLineNo">424</span><a id="line.424">        else{</a>
<span class="sourceLineNo">425</span><a id="line.425">            String vMess = "Tu es perdu(e). Tu es seul(e). \n \n Voici les commandes disponibles: " ;</a>
<span class="sourceLineNo">426</span><a id="line.426">            this.aGui.println(vMess + this.aParser.showCommands());</a>
<span class="sourceLineNo">427</span><a id="line.427">        }</a>
<span class="sourceLineNo">428</span><a id="line.428">    } // printHelp(.)</a>
<span class="sourceLineNo">429</span><a id="line.429">    </a>
<span class="sourceLineNo">430</span><a id="line.430">    /**</a>
<span class="sourceLineNo">431</span><a id="line.431">     * A pour but de dÃ©placer le joueur dans une nouvelle piÃ¨ce en fonction de la commande entrÃ©e.</a>
<span class="sourceLineNo">432</span><a id="line.432">     * si la commande est correcte, alors le joueur se dÃ©place dans la nouvelle piÃ¨ce</a>
<span class="sourceLineNo">433</span><a id="line.433">     * sinon, un message d'erreur est affichÃ©.</a>
<span class="sourceLineNo">434</span><a id="line.434">     */</a>
<span class="sourceLineNo">435</span><a id="line.435">    public void goRoom(final Command pComad){</a>
<span class="sourceLineNo">436</span><a id="line.436">        if(!pComad.hasSecondWord()){</a>
<span class="sourceLineNo">437</span><a id="line.437">           this.aGui.println("Aller oÃ¹ ?");</a>
<span class="sourceLineNo">438</span><a id="line.438">           return;</a>
<span class="sourceLineNo">439</span><a id="line.439">        }</a>
<span class="sourceLineNo">440</span><a id="line.440">        </a>
<span class="sourceLineNo">441</span><a id="line.441">        String vDirection = pComad.getSecondWord();</a>
<span class="sourceLineNo">442</span><a id="line.442">        </a>
<span class="sourceLineNo">443</span><a id="line.443">        Room vNextRoom = this.aPlayer.getCurrentRoomExit(vDirection);</a>
<span class="sourceLineNo">444</span><a id="line.444">        </a>
<span class="sourceLineNo">445</span><a id="line.445">        if(this.aPlayer.getCurrentRoom().estTransporterRoom()){ // VÃ©rifie que la currentRoom est de type transporterRoom.</a>
<span class="sourceLineNo">446</span><a id="line.446">            if(this.aTest &amp;&amp; this.aAleaRoom != null){ // VÃ©rifie que nous sommes dans un test.</a>
<span class="sourceLineNo">447</span><a id="line.447">                vNextRoom = this.aAleaRoom;</a>
<span class="sourceLineNo">448</span><a id="line.448">            }</a>
<span class="sourceLineNo">449</span><a id="line.449">            else{</a>
<span class="sourceLineNo">450</span><a id="line.450">                vNextRoom = ((TransporterRoom)(this.aPlayer.getCurrentRoom())).getExit(vDirection); // Prend une Room alÃ©atoire.</a>
<span class="sourceLineNo">451</span><a id="line.451">            }</a>
<span class="sourceLineNo">452</span><a id="line.452">        }</a>
<span class="sourceLineNo">453</span><a id="line.453">        </a>
<span class="sourceLineNo">454</span><a id="line.454">        if(vNextRoom == null){</a>
<span class="sourceLineNo">455</span><a id="line.455">            this.aGui.println("Il n'y a pas de porte !");</a>
<span class="sourceLineNo">456</span><a id="line.456">        }</a>
<span class="sourceLineNo">457</span><a id="line.457">        else{</a>
<span class="sourceLineNo">458</span><a id="line.458">            this.change(vNextRoom);//Permet de traiter un changement de salle mÃªme si on connait seulement la salle oÃ¹ on veut que le joueur aille</a>
<span class="sourceLineNo">459</span><a id="line.459">            </a>
<span class="sourceLineNo">460</span><a id="line.460">        }</a>
<span class="sourceLineNo">461</span><a id="line.461">    } // goRoom(.)</a>
<span class="sourceLineNo">462</span><a id="line.462">    </a>
<span class="sourceLineNo">463</span><a id="line.463">    /**</a>
<span class="sourceLineNo">464</span><a id="line.464">     * permet de dÃ©placer le joueur dans une nouvelle Room en vÃ©rifiant que le joueur a encore du temps.</a>
<span class="sourceLineNo">465</span><a id="line.465">     */</a>
<span class="sourceLineNo">466</span><a id="line.466">    public void change(final Room pRoom)</a>
<span class="sourceLineNo">467</span><a id="line.467">    {</a>
<span class="sourceLineNo">468</span><a id="line.468">        if(this.aCompteur &lt;= 0){</a>
<span class="sourceLineNo">469</span><a id="line.469">            this.aGui.println("Tu es mort ! \n Tu a mis trop de temps Ã  t'Ã©chapper et un train encore en activitÃ© ta percutÃ©.");</a>
<span class="sourceLineNo">470</span><a id="line.470">            this.endGame();</a>
<span class="sourceLineNo">471</span><a id="line.471">            return;</a>
<span class="sourceLineNo">472</span><a id="line.472">        }</a>
<span class="sourceLineNo">473</span><a id="line.473">        this.aCompteur -= 1;</a>
<span class="sourceLineNo">474</span><a id="line.474">        this.aGui.print(this.aPlayer.change(pRoom));</a>
<span class="sourceLineNo">475</span><a id="line.475">        this.aPlayer.bonusMalus2();</a>
<span class="sourceLineNo">476</span><a id="line.476">        if(this.aPlayer.getFinDuJeu()){</a>
<span class="sourceLineNo">477</span><a id="line.477">            this.aGui.showImage("image/victoire.jpg");</a>
<span class="sourceLineNo">478</span><a id="line.478">            this.aGui.println("Bravo ! tu as rÃ©ussi Ã  sortir de la station de mÃ©tro \n tu as donc gagnÃ© le jeu !");</a>
<span class="sourceLineNo">479</span><a id="line.479">            this.message();</a>
<span class="sourceLineNo">480</span><a id="line.480">        }</a>
<span class="sourceLineNo">481</span><a id="line.481">        else if(this.aPlayer.getPerdu()){</a>
<span class="sourceLineNo">482</span><a id="line.482">            this.aGui.showImage("image/alarme.jpg");</a>
<span class="sourceLineNo">483</span><a id="line.483">            this.aGui.println("Dommage... Tu as perdu en te faisant arrÃªter par la police, il y avait une alarme.");</a>
<span class="sourceLineNo">484</span><a id="line.484">            this.message();</a>
<span class="sourceLineNo">485</span><a id="line.485">        }</a>
<span class="sourceLineNo">486</span><a id="line.486">        else this.printLocationInfo();</a>
<span class="sourceLineNo">487</span><a id="line.487">            </a>
<span class="sourceLineNo">488</span><a id="line.488">    } // change(.)</a>
<span class="sourceLineNo">489</span><a id="line.489">    </a>
<span class="sourceLineNo">490</span><a id="line.490">    public void message() // Permet d'Ã©viter la rÃ©pÃ©tition.</a>
<span class="sourceLineNo">491</span><a id="line.491">    {</a>
<span class="sourceLineNo">492</span><a id="line.492">        int vBon = this.aPlayer.getBonus();</a>
<span class="sourceLineNo">493</span><a id="line.493">        if(this.aPlayer.isCarteUtilise() == 0) vBon += 1;</a>
<span class="sourceLineNo">494</span><a id="line.494">        this.aGui.println("Tu as fais " + vBon +" bons choix et " + this.aPlayer.getMalus() + " Mauvais !");</a>
<span class="sourceLineNo">495</span><a id="line.495">        if(this.aPlayer.getMalus() &gt; 0 || this.aPlayer.getBonus() == 0) this.aGui.println("Tu peux mieux faire.");</a>
<span class="sourceLineNo">496</span><a id="line.496">        else this.aGui.println("Tu as fais les bons choix mais pas pour le plus important!");</a>
<span class="sourceLineNo">497</span><a id="line.497">    } // message()</a>
<span class="sourceLineNo">498</span><a id="line.498">    </a>
<span class="sourceLineNo">499</span><a id="line.499">    /**</a>
<span class="sourceLineNo">500</span><a id="line.500">     * Permet d'afficher une description complÃ¨te de l'endroit oÃ¹ le joueur se trouve.</a>
<span class="sourceLineNo">501</span><a id="line.501">     */</a>
<span class="sourceLineNo">502</span><a id="line.502">    private void printLocationInfo(){</a>
<span class="sourceLineNo">503</span><a id="line.503">        this.aGui.println(this.aPlayer.getCurrentRoom().getLongDescription()); </a>
<span class="sourceLineNo">504</span><a id="line.504">        if(this.aPlayer.getCurrentRoom().getImageName() != null)</a>
<span class="sourceLineNo">505</span><a id="line.505">            this.aGui.showImage(this.aPlayer.getCurrentRoom().getImageName());  </a>
<span class="sourceLineNo">506</span><a id="line.506">            this.aImage = this.aPlayer.getCurrentRoom().getImageName();</a>
<span class="sourceLineNo">507</span><a id="line.507">    } // printLocationInfo()</a>
<span class="sourceLineNo">508</span><a id="line.508">    </a>
<span class="sourceLineNo">509</span><a id="line.509">    /**</a>
<span class="sourceLineNo">510</span><a id="line.510">     * C'est une procÃ©dure qui permet de regarder oÃ¹ on se trouve ou si il y a un deuxiÃ¨me mot a la commande, donne la description de l'item choisis.</a>
<span class="sourceLineNo">511</span><a id="line.511">     */</a>
<span class="sourceLineNo">512</span><a id="line.512">    public void look(final Command pCommand){</a>
<span class="sourceLineNo">513</span><a id="line.513">        if (!pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">514</span><a id="line.514">            this.aGui.println(this.aPlayer.look());</a>
<span class="sourceLineNo">515</span><a id="line.515">        }</a>
<span class="sourceLineNo">516</span><a id="line.516">        else{</a>
<span class="sourceLineNo">517</span><a id="line.517">            this.aGui.println(this.aPlayer.lookItem(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">518</span><a id="line.518">        }</a>
<span class="sourceLineNo">519</span><a id="line.519">    } // look(.)</a>
<span class="sourceLineNo">520</span><a id="line.520">    </a>
<span class="sourceLineNo">521</span><a id="line.521">    /**</a>
<span class="sourceLineNo">522</span><a id="line.522">     * C'est une mÃ©thode qui permet de revenir dans la salle prÃ©cÃ©dente.</a>
<span class="sourceLineNo">523</span><a id="line.523">     */</a>
<span class="sourceLineNo">524</span><a id="line.524">    public void back(final Command pCommand){</a>
<span class="sourceLineNo">525</span><a id="line.525">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">526</span><a id="line.526">            this.aGui.println("'arriere' n'est pas supposÃ© avoir de second mot.");</a>
<span class="sourceLineNo">527</span><a id="line.527">        }</a>
<span class="sourceLineNo">528</span><a id="line.528">        </a>
<span class="sourceLineNo">529</span><a id="line.529">        if (this.aPlayer.hasRoomPrecedente()) this.aGui.println("Tu ne peux pas aller en arriere ici.");</a>
<span class="sourceLineNo">530</span><a id="line.530">        </a>
<span class="sourceLineNo">531</span><a id="line.531">        else{</a>
<span class="sourceLineNo">532</span><a id="line.532">            if(this.aCompteur &lt;= 0){</a>
<span class="sourceLineNo">533</span><a id="line.533">                this.aGui.println("Tu es mort ! \n Tu a mis trop de temps Ã  t'Ã©chapper et un train encore en activitÃ© ta percutÃ©.");</a>
<span class="sourceLineNo">534</span><a id="line.534">                this.endGame();</a>
<span class="sourceLineNo">535</span><a id="line.535">                return;</a>
<span class="sourceLineNo">536</span><a id="line.536">            }</a>
<span class="sourceLineNo">537</span><a id="line.537">            this.aCompteur -= 1;</a>
<span class="sourceLineNo">538</span><a id="line.538">            this.aPlayer.arriere();</a>
<span class="sourceLineNo">539</span><a id="line.539">            this.printLocationInfo();</a>
<span class="sourceLineNo">540</span><a id="line.540">        }</a>
<span class="sourceLineNo">541</span><a id="line.541">    } // back(.)</a>
<span class="sourceLineNo">542</span><a id="line.542">    </a>
<span class="sourceLineNo">543</span><a id="line.543">    /**</a>
<span class="sourceLineNo">544</span><a id="line.544">     * C'est une mÃ©thode qui permet de manger pour retrouver de l'Ã©nergie si le joueur a Ã  manger.</a>
<span class="sourceLineNo">545</span><a id="line.545">     */</a>
<span class="sourceLineNo">546</span><a id="line.546">    public void manger(final Command pCommand){</a>
<span class="sourceLineNo">547</span><a id="line.547">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">548</span><a id="line.548">            this.aGui.println(this.aPlayer.manger(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">549</span><a id="line.549">        }</a>
<span class="sourceLineNo">550</span><a id="line.550">        else this.aGui.println("Manger quoi ?");</a>
<span class="sourceLineNo">551</span><a id="line.551">    } // manger(.)</a>
<span class="sourceLineNo">552</span><a id="line.552">    </a>
<span class="sourceLineNo">553</span><a id="line.553">    /**</a>
<span class="sourceLineNo">554</span><a id="line.554">     * C'est une mÃ©thode qui permet de prendre un item qui est dans une piÃ¨ce du jeu si cet item y est.</a>
<span class="sourceLineNo">555</span><a id="line.555">     */</a>
<span class="sourceLineNo">556</span><a id="line.556">    private void prendre(final Command pCommand)</a>
<span class="sourceLineNo">557</span><a id="line.557">    {</a>
<span class="sourceLineNo">558</span><a id="line.558">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">559</span><a id="line.559">            this.aGui.println(this.aPlayer.prendre(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">560</span><a id="line.560">        }</a>
<span class="sourceLineNo">561</span><a id="line.561">        else this.aGui.println("Prendre quoi ?");</a>
<span class="sourceLineNo">562</span><a id="line.562">    } // prendre(.)</a>
<span class="sourceLineNo">563</span><a id="line.563">    </a>
<span class="sourceLineNo">564</span><a id="line.564">    /**</a>
<span class="sourceLineNo">565</span><a id="line.565">     * C'est une mÃ©thode qui permet de relacher un item dans une piÃ¨ce du jeu si on a cet item.</a>
<span class="sourceLineNo">566</span><a id="line.566">     */</a>
<span class="sourceLineNo">567</span><a id="line.567">    private void lacher(final Command pCommand)</a>
<span class="sourceLineNo">568</span><a id="line.568">    {</a>
<span class="sourceLineNo">569</span><a id="line.569">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">570</span><a id="line.570">            this.aGui.println(this.aPlayer.lacher(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">571</span><a id="line.571">        }</a>
<span class="sourceLineNo">572</span><a id="line.572">        else this.aGui.println("Lacher quoi ?");</a>
<span class="sourceLineNo">573</span><a id="line.573">    } // lacher(.)</a>
<span class="sourceLineNo">574</span><a id="line.574">    </a>
<span class="sourceLineNo">575</span><a id="line.575">    /**</a>
<span class="sourceLineNo">576</span><a id="line.576">     * C'est une procÃ©dure qui permet de boire pour retrouver de l'Ã©nergie si on a Ã  boire.</a>
<span class="sourceLineNo">577</span><a id="line.577">     */</a>
<span class="sourceLineNo">578</span><a id="line.578">    public void boire(final Command pCommand){</a>
<span class="sourceLineNo">579</span><a id="line.579">        if (pCommand.hasSecondWord()){</a>
<span class="sourceLineNo">580</span><a id="line.580">            this.aGui.println(this.aPlayer.boire(pCommand.getSecondWord()));</a>
<span class="sourceLineNo">581</span><a id="line.581">        }</a>
<span class="sourceLineNo">582</span><a id="line.582">        else this.aGui.println("Boire quoi ?");</a>
<span class="sourceLineNo">583</span><a id="line.583">    } // boire(.)</a>
<span class="sourceLineNo">584</span><a id="line.584">    </a>
<span class="sourceLineNo">585</span><a id="line.585">    /**</a>
<span class="sourceLineNo">586</span><a id="line.586">     * Permet de lire un fichier pour executer des commandes automatiquement.</a>
<span class="sourceLineNo">587</span><a id="line.587">     */</a>
<span class="sourceLineNo">588</span><a id="line.588">    private void test(final Command pCommand) // aide sur gitHub.</a>
<span class="sourceLineNo">589</span><a id="line.589">    {</a>
<span class="sourceLineNo">590</span><a id="line.590">        String vNom;</a>
<span class="sourceLineNo">591</span><a id="line.591">        if (pCommand.hasSecondWord()) </a>
<span class="sourceLineNo">592</span><a id="line.592">            vNom = pCommand.getSecondWord();</a>
<span class="sourceLineNo">593</span><a id="line.593">        else{</a>
<span class="sourceLineNo">594</span><a id="line.594">            this.aGui.println("Tu veux tester quoi ?");</a>
<span class="sourceLineNo">595</span><a id="line.595">            vNom = null;</a>
<span class="sourceLineNo">596</span><a id="line.596">        }</a>
<span class="sourceLineNo">597</span><a id="line.597">        </a>
<span class="sourceLineNo">598</span><a id="line.598">        try{</a>
<span class="sourceLineNo">599</span><a id="line.599">            this.aTest = true;</a>
<span class="sourceLineNo">600</span><a id="line.600">            Scanner vSc = new Scanner(new File(vNom+".txt"));</a>
<span class="sourceLineNo">601</span><a id="line.601">            while (vSc.hasNext()){</a>
<span class="sourceLineNo">602</span><a id="line.602">                this.interpretCommand(vSc.nextLine());</a>
<span class="sourceLineNo">603</span><a id="line.603">            }</a>
<span class="sourceLineNo">604</span><a id="line.604">            this.aTest = false;</a>
<span class="sourceLineNo">605</span><a id="line.605">        }</a>
<span class="sourceLineNo">606</span><a id="line.606">        catch(final java.io.FileNotFoundException pE){</a>
<span class="sourceLineNo">607</span><a id="line.607">            this.aGui.println("Le fichier demandÃ© n'a pas Ã©tÃ© trouvÃ©.");</a>
<span class="sourceLineNo">608</span><a id="line.608">        }</a>
<span class="sourceLineNo">609</span><a id="line.609">    } // test(.)</a>
<span class="sourceLineNo">610</span><a id="line.610">    </a>
<span class="sourceLineNo">611</span><a id="line.611">    /**</a>
<span class="sourceLineNo">612</span><a id="line.612">     * Permet de choisir la prochaine salle pendant un test pour faire comme si le joueur </a>
<span class="sourceLineNo">613</span><a id="line.613">     * Ã©tait tÃ©lÃ©portÃ© alÃ©atoirement.</a>
<span class="sourceLineNo">614</span><a id="line.614">     */</a>
<span class="sourceLineNo">615</span><a id="line.615">    public void alea(final Command pCommand)</a>
<span class="sourceLineNo">616</span><a id="line.616">    {</a>
<span class="sourceLineNo">617</span><a id="line.617">        if (!this.aTest)</a>
<span class="sourceLineNo">618</span><a id="line.618">        {</a>
<span class="sourceLineNo">619</span><a id="line.619">            this.aGui.println("Cette commande n'est utilisable que pendant un test.");</a>
<span class="sourceLineNo">620</span><a id="line.620">            return;</a>
<span class="sourceLineNo">621</span><a id="line.621">        }</a>
<span class="sourceLineNo">622</span><a id="line.622">        if (!pCommand.hasSecondWord())</a>
<span class="sourceLineNo">623</span><a id="line.623">        {</a>
<span class="sourceLineNo">624</span><a id="line.624">            this.aGui.println("alea doit avoir un second mot");</a>
<span class="sourceLineNo">625</span><a id="line.625">            return;</a>
<span class="sourceLineNo">626</span><a id="line.626">        }</a>
<span class="sourceLineNo">627</span><a id="line.627">        if (!aRooms.containsKey(pCommand.getSecondWord()))</a>
<span class="sourceLineNo">628</span><a id="line.628">        {</a>
<span class="sourceLineNo">629</span><a id="line.629">            this.aGui.println("Cette piÃ¨ce n'existe pas.");</a>
<span class="sourceLineNo">630</span><a id="line.630">            return;</a>
<span class="sourceLineNo">631</span><a id="line.631">        }</a>
<span class="sourceLineNo">632</span><a id="line.632">        this.aAleaRoom = (aRooms.get(pCommand.getSecondWord())); // met en mÃ©moire la Room voulu pour simuler un tirage alÃ©atoire.</a>
<span class="sourceLineNo">633</span><a id="line.633">        this.aGui.println("La prochaine piÃ¨ce est enregistrÃ©e.");</a>
<span class="sourceLineNo">634</span><a id="line.634">    } // alea(.)</a>
<span class="sourceLineNo">635</span><a id="line.635">    </a>
<span class="sourceLineNo">636</span><a id="line.636">    /**</a>
<span class="sourceLineNo">637</span><a id="line.637">     * Cette procÃ©dure permet de fermer la fenÃªtre du jeu si elle est appelÃ©e.</a>
<span class="sourceLineNo">638</span><a id="line.638">     */</a>
<span class="sourceLineNo">639</span><a id="line.639">    private void endGame(){</a>
<span class="sourceLineNo">640</span><a id="line.640">        this.aGui.showImage("image/vPerdu2.jpg"); </a>
<span class="sourceLineNo">641</span><a id="line.641">        this.aGui.println( "Merci d'avoir jouÃ©, Bye." );</a>
<span class="sourceLineNo">642</span><a id="line.642">        this.aGui.enable( false );</a>
<span class="sourceLineNo">643</span><a id="line.643">    } // endGame()</a>
<span class="sourceLineNo">644</span><a id="line.644">} // GameEngine</a>




























































</pre>
</div>
</main>
</body>
</html>
